# null--nostr (ã¬ã‚‹ã¬ã‚‹) â€” CLAUDE.md

> **AIã¸ã®æŒ‡ç¤ºæ›¸**ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«å¿…ãšèª­ã‚€ã“ã¨ã€‚

> **é‡è¦**: ä½œæ¥­å®Œäº†å¾Œã¯å¿…ãšã“ã® CLAUDE.md ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã€‚
> å®Œäº†ã—ãŸ Step ã‚’ âœ… ã«å¤‰æ›´ã—ã€æ–°è¦å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ»ä½¿ã„æ–¹ã‚’è¿½è¨˜ã™ã‚‹ã€‚

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ã¬ã‚‹ã¬ã‚‹**ã¯æ—¥æœ¬èªåœå‘ã‘ã®é«˜é€Ÿ Nostr ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Next.js PWA)ã€‚

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| å±¤ | æŠ€è¡“ | çŠ¶æ…‹ |
|---|---|---|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Next.js 14 + Tailwind | ç¨¼åƒä¸­ |
| Nostr ãƒ—ãƒ­ãƒˆã‚³ãƒ« (Web) | `nostr-tools` (JS) + WebSocket | **æ­£è¦ã®å®Ÿè£…ãƒ»ç¶­æŒ** |
| Rust ã‚¨ãƒ³ã‚¸ãƒ³ (ã‚³ã‚¢) | `nostr-sdk` v0.44 + `nostrdb` v0.8 | å®Ÿè£…æ¸ˆã¿ãƒ»**ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå‘ã‘** |
| FFI ãƒ–ãƒªãƒƒã‚¸ (Web) | `napi-rs` v2 | å®Ÿè£…æ¸ˆã¿ãƒ»**Web ã§ã¯ä½¿ã‚ãªã„æ–¹é‡ã¸å¤‰æ›´** |
| FFI ãƒ–ãƒªãƒƒã‚¸ (Mobile) | UniFFI | ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ«ãƒ‰æ¸ˆã¿ãƒ»Step 10 ã§å®Œæˆäºˆå®š |

---

## âš ï¸ é‡è¦ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡ï¼ˆ2026-02 æ”¹è¨‚ï¼‰

### nostrdb ã¯ã€Œå€‹äººãƒ­ãƒ¼ã‚«ãƒ«å‘ã‘ã€ã§ã‚ã‚Šã€ã‚µãƒ¼ãƒãƒ¼å…±æœ‰ DB ã§ã¯ãªã„

nostrdb ã®è¨­è¨ˆæ€æƒ³ï¼š
- **1ãƒ‡ãƒã‚¤ã‚¹ = 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ = 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**ï¼ˆå€‹äººã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (iOS/Android) ã‚„ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªå‘ã‘
- è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…±æœ‰ã™ã‚‹ã“ã¨ã‚’**æƒ³å®šã—ã¦ã„ãªã„**

ä»¥å‰ã®å®Ÿè£…ï¼ˆStep 2ã€œ8ï¼‰ã¯ Railway ä¸Šã§ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã« nostrdb ã‚’ç½®ãã€å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±æœ‰ã—ã¦ã„ãŸã€‚ã“ã‚Œã¯ **è¨­è¨ˆä¸Šã®èª¤ã‚Š**ã€‚

### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã®æ­£ã—ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | æ­£ã—ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ |
|---|---|
| **Web (Next.js / Vercel)** | ãƒ–ãƒ©ã‚¦ã‚¶ãŒ `nostr-tools` ã§å„ãƒªãƒ¬ãƒ¼ã«ç›´æ¥ WebSocket æ¥ç¶š |
| **Native iOS/Android** | ãƒ‡ãƒã‚¤ã‚¹å†… nostrdb + `nurunuru-ffi` (UniFFI) |
| **Desktop (Tauri ç­‰)** | ãƒ­ãƒ¼ã‚«ãƒ« nostrdb + `nurunuru-napi` |

### Web ç‰ˆã®æ­£ã—ã„ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆç¾åœ¨ã®æ–¹é‡ï¼‰

```
ãƒ–ãƒ©ã‚¦ã‚¶
  â”œâ”€ nostr-tools (SimplePool, WebSocket)  â† ãƒªãƒ¬ãƒ¼ã¨ç›´æ¥é€šä¿¡
  â”œâ”€ NIP-07 / Amber / NIP-46              â† ç½²åï¼ˆç§˜å¯†éµã¯ãƒ–ãƒ©ã‚¦ã‚¶å¤–ã«å‡ºãªã„ï¼‰
  â””â”€ localStorage / LRU ã‚­ãƒ£ãƒƒã‚·ãƒ¥        â† UI ã‚­ãƒ£ãƒƒã‚·ãƒ¥

ã‚µãƒ¼ãƒãƒ¼ (Next.js / Vercel)
  â””â”€ ç½²åãƒ»ãƒªãƒ¬ãƒ¼é€šä¿¡ã¯ä¸€åˆ‡ã—ãªã„
     ï¼ˆé™çš„ãƒšãƒ¼ã‚¸é…ä¿¡ + æœ€å°é™ã® API ã®ã¿ï¼‰
```

### `nostr-tools` ã¯å‰Šé™¤ã—ãªã„ï¼ˆStep 9 ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰

`nostr-tools` + WebSocket ç›´æ¥æ¥ç¶šã¯ Web ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦ **æ­£ã—ã„è¨­è¨ˆ**ã€‚
ä»¥å‰ã® Step 9ï¼ˆnostr-tools å‰Šé™¤ï¼‰ã¯èª¤ã£ãŸæ–¹å‘æ€§ã ã£ãŸãŸã‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€‚

### Rust ã‚³ã‚¢ (`nurunuru-core`) ã®ä½ç½®ã¥ã‘

- **æ¨ã¦ãªã„** â€” ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå‘ã‘ã®å®Ÿè£…ã¨ã—ã¦ä¾¡å€¤ãŒã‚ã‚‹
- **Web ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã¯ä½¿ã‚ãªã„** â€” Railway ãƒ‡ãƒ—ãƒ­ã‚¤ã¯å»ƒæ­¢
- **è¡Œãå…ˆã¯ nurunuru-ffi (Step 10)** â€” iOS/Android ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒª

---

## ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ 

```
null--nostr/
â”œâ”€â”€ app/                    # Next.js App Router ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ nip05/          # NIP-05 æ¤œè¨¼ APIï¼ˆå”¯ä¸€æ®‹å­˜ã™ã‚‹ API ãƒ«ãƒ¼ãƒˆï¼‰
â”œâ”€â”€ components/             # React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                    # JS ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ nostr.js            # ã‚¤ãƒ™ãƒ³ãƒˆç½²åãƒ»ç™ºè¡Œãƒ»è³¼èª­ â† æ­£è¦å®Ÿè£…ãƒ»ç¶­æŒ
â”‚   â”œâ”€â”€ cache.js            # localStorage + LRU ã‚­ãƒ£ãƒƒã‚·ãƒ¥ â† ç¶­æŒ
â”‚   â”œâ”€â”€ recommendation.js   # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ©ãƒ³ã‚­ãƒ³ã‚° (Xé¢¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ) â† ç¶­æŒ
â”‚   â”œâ”€â”€ filters.js          # Nostr Filter ãƒ•ã‚¡ã‚¯ãƒˆãƒª â† ç¶­æŒ
â”‚   â”œâ”€â”€ connection-manager.js # ãƒªãƒ¬ãƒ¼æ¥ç¶šç®¡ç† â† æ­£è¦å®Ÿè£…ãƒ»ç¶­æŒ
â”‚   â”œâ”€â”€ rust-bridge.js      # ç„¡åŠ¹åŒ–æ¸ˆã¿ (null ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–)
â”‚   â””â”€â”€ rust-engine-manager.js # ç„¡åŠ¹åŒ–æ¸ˆã¿ (null/false ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–)
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useProfile.js       # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ãƒ•ãƒƒã‚¯ï¼ˆç›´æ¥ JS fetchï¼‰
â”‚   â””â”€â”€ useNostrSubscription.js # WebSocket è³¼èª­ãƒ•ãƒƒã‚¯ï¼ˆSSE å‰Šé™¤æ¸ˆã¿ï¼‰
â”œâ”€â”€ instrumentation.js      # ç„¡åŠ¹åŒ–æ¸ˆã¿ (no-op)
â”œâ”€â”€ next.config.js          # Next.js è¨­å®š
â””â”€â”€ rust-engine/            # Rust ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå‘ã‘ï¼‰
    â”œâ”€â”€ Cargo.toml          # Workspace
    â”œâ”€â”€ nurunuru-core/      # ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰â† ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã§ä½¿ã†
    â”œâ”€â”€ nurunuru-ffi/       # UniFFI ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ«ãƒ‰æ¸ˆã¿ï¼‰â† Step 10
    â””â”€â”€ nurunuru-napi/      # napi-rs ãƒ–ãƒªãƒƒã‚¸ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—/Tauri å‘ã‘ï¼‰
        â”œâ”€â”€ Cargo.toml
        â”œâ”€â”€ build.rs
        â”œâ”€â”€ package.json
        â””â”€â”€ src/lib.rs
```

---

## ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### Rust ã‚³ã‚¢å®Ÿè£… âœ…

- `rust-engine/nurunuru-core` ã®å®Ÿè£…ï¼ˆå…¨ 13 ãƒ†ã‚¹ãƒˆ passï¼‰
  - `engine.rs` â€” `NuruNuruEngine` (nostr-sdk Client + nostrdb ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
  - `recommendation.rs` â€” ãƒ•ã‚£ãƒ¼ãƒ‰ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
  - `filters.rs` â€” Filter ãƒ•ã‚¡ã‚¯ãƒˆãƒª
  - `relay.rs` â€” ãƒªãƒ¬ãƒ¼URLæ¤œè¨¼ + ã‚¸ã‚ªãƒãƒƒã‚·ãƒ¥è¿‘æ¥é¸æŠ
  - `config.rs` â€” å…¨è¨­å®šå€¤
  - `error.rs` â€” æ—¥æœ¬èªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- `rust-engine/nurunuru-ffi` ã‚¹ã‚­ãƒ£ãƒ•ã‚©ãƒ«ãƒ‰ (UniFFI proc-macro)
- `rust-engine/nurunuru-napi/` å®Ÿè£…ãƒ»ãƒ“ãƒ«ãƒ‰å®Œäº†

### Web ç‰ˆ (nostr-tools ãƒ™ãƒ¼ã‚¹) ã®å®Ÿè£… âœ…

- `lib/nostr.js` â€” ã‚¤ãƒ™ãƒ³ãƒˆç½²åãƒ»ç™ºè¡Œãƒ»è³¼èª­ï¼ˆNIP-07/Amber/NIP-46 å¯¾å¿œï¼‰
- `lib/connection-manager.js` â€” WebSocket æ¥ç¶šç®¡ç†ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»é‡è¤‡æ’é™¤ï¼‰
- `lib/recommendation.js` â€” ãƒ•ã‚£ãƒ¼ãƒ‰ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° (JS å®Ÿè£…)
- `lib/filters.js` â€” Nostr Filter ãƒ•ã‚¡ã‚¯ãƒˆãƒª (JS å®Ÿè£…)
- `lib/cache.js` â€” localStorage + LRU ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ Rust APIï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰âœ…

Step 2ã€œ8 ã§å®Ÿè£…ã—ãŸã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ Rust API ã¯ã€nostrdb å…±æœ‰åˆ©ç”¨ã®è¨­è¨ˆä¸Šã®å•é¡ŒãŒã‚ã£ãŸãŸã‚å‰Šé™¤ã—ãŸã€‚

| Step | å†…å®¹ | çŠ¶æ…‹ |
|---|---|---|
| Step 2 | ãƒ•ã‚£ãƒ¼ãƒ‰ API (`/api/feed`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 2.5 | nostrdb æ›¸ãè¾¼ã¿ (`/api/ingest`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 3 | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (`/api/profile`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 4 | ãƒªãƒ¬ãƒ¼ç®¡ç† (`/api/relay`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 5 | ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ (`/api/publish`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 6 | ãƒ•ã‚©ãƒ­ãƒ¼/ãƒŸãƒ¥ãƒ¼ãƒˆç®¡ç† (`/api/social`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 7 | DMãƒ»æ¤œç´¢ (`/api/dm`, `/api/search`) | âœ… å‰Šé™¤æ¸ˆã¿ |
| Step 8 | SSE ãƒ—ãƒ­ã‚­ã‚· (`/api/stream`) | âœ… å‰Šé™¤æ¸ˆã¿ |

---

## ãƒ“ãƒ«ãƒ‰æ‰‹é †

```bash
# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npm install

# é–‹ç™º (Web ç‰ˆãƒ»nostr-tools ãƒ™ãƒ¼ã‚¹)
npm run dev

# Rust ãƒ“ãƒ«ãƒ‰ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºæ™‚ã®ã¿ï¼‰
npm run build:rust   # Rust ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³å¿…é ˆï¼ˆrustup ã§å°å…¥ï¼‰
```

`build:rust` ã®ä¸­èº«ï¼š`cd rust-engine/nurunuru-napi && npx napi build --release`

---

## é‡è¦ãªè¨­è¨ˆæ–¹é‡

- **nostr-tools + WebSocket ã¯ Web ç‰ˆã®æ­£è¦å®Ÿè£…**: å‰Šé™¤ã—ãªã„ã€‚ãƒªãƒ¬ãƒ¼ã¨ã®ç›´æ¥é€šä¿¡ãŒæ­£ã—ã„ã€‚
- **nostrdb ã¯ã‚µãƒ¼ãƒãƒ¼ã§å…±æœ‰ã—ãªã„**: å€‹äººãƒ‡ãƒã‚¤ã‚¹å†…ã§ã®ã¿ä½¿ã†ï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå‘ã‘ï¼‰
- **ç½²åã¯ãƒ–ãƒ©ã‚¦ã‚¶è²¬å‹™**: ç§˜å¯†éµã¯ NIP-07/Amber/NIP-46 ãŒç®¡ç†ã€‚ã‚µãƒ¼ãƒãƒ¼ã«æ¸¡ã•ãªã„ã€‚
- **Rust ã‚³ã‚¢ã¯æ¨ã¦ãªã„**: `nurunuru-core` ã®å®Ÿè£…ã¯ nurunuru-ffi (Step 10) ã§æ´»ã‹ã™
- **Railway ãƒ‡ãƒ—ãƒ­ã‚¤ã¯å»ƒæ­¢**: Rust ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ã‚µãƒ¼ãƒãƒ¼ã§å‹•ã‹ã™æ§‹æˆã¯ã‚„ã‚ã‚‹

---

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒªãƒ¬ãƒ¼ï¼ˆæ—¥æœ¬ï¼‰

```
wss://yabu.me              (ãƒ¡ã‚¤ãƒ³)
wss://relay-jp.nostr.wirednet.jp
wss://r.kojira.io
wss://relay.damus.io       (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)
wss://search.nos.today     (NIP-50 æ¤œç´¢å°‚ç”¨)
```

---

## ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨

- ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒ: `claude/nostr-relay-websocket-PIB7K`
- ãƒãƒ¼ã‚¸å…ˆ: `master`

---

## ä»Šå¾Œã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Web ç‰ˆ: Rust API ã®å·®ã—æˆ»ã— âœ…

å®Œäº†æ¸ˆã¿ï¼ˆ2026-02-19ï¼‰ã€‚

å®Ÿæ–½å†…å®¹ï¼š
1. `components/TimelineTab.js` â€” `/api/feed`, `/api/ingest` å‘¼ã³å‡ºã—ã‚’å‰Šé™¤ã€‚JS/nostr-tools ç›´æ¥ãƒ•ã‚§ãƒƒãƒã®ã¿ä½¿ç”¨
2. `hooks/useProfile.js` â€” `/api/profile`, `/api/profile/batch` å‘¼ã³å‡ºã—ã‚’å‰Šé™¤ã€‚`fetchProfileCached` / `fetchProfilesBatch` ã‚’ç›´æ¥å‘¼ã³å‡ºã™ã‚ˆã†å¤‰æ›´
3. `lib/nostr.js` â€” `/api/publish`, `/api/social/mutes`, `/api/social/follows` å‘¼ã³å‡ºã—ã‚’å‰Šé™¤ã€‚connection-manager çµŒç”±ã®ç›´æ¥ç™ºè¡Œãƒ»relay fetch ã®ã¿ä½¿ç”¨
4. `instrumentation.js` â€” no-op ã«å¤‰æ›´
5. `lib/rust-bridge.js` â€” null ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–ã«å¤‰æ›´
6. `lib/rust-engine-manager.js` â€” null/false ã‚’è¿”ã™ã‚¹ã‚¿ãƒ–ã«å¤‰æ›´
7. `hooks/useNostrSubscription.js` â€” SSE ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚’å‰Šé™¤ã— WebSocket ã®ã¿ä½¿ç”¨
8. `lib/nostr-sse.js` â€” å‰Šé™¤ï¼ˆ`/api/stream` å»ƒæ­¢ã®ãŸã‚ä¸è¦ï¼‰
9. å»ƒæ­¢ API ãƒ«ãƒ¼ãƒˆå‰Šé™¤: `feed`, `ingest`, `profile`, `publish`, `relay`, `social`, `dm`, `search`, `stream`, `rust-status`

### Step 10: nurunuru-ffi å®Œæˆ (ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå¯¾å¿œ) ğŸ”²

**ç›®æ¨™**: iOS / Android å‘ã‘ UniFFI ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Œæˆã•ã›ã‚‹ã€‚
ã“ã‚ŒãŒ Rust ã‚³ã‚¢ (`nurunuru-core`) ã®æœ¬æ¥ã®è¡Œãå…ˆã€‚

```
nurunuru-ffi/
  â”œâ”€ src/lib.rs       â€” #[uniffi::export] ãƒ©ãƒƒãƒ‘ãƒ¼
  â”œâ”€ nurunuru.udl     â€” UniFFI å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
  â””â”€ bindgen/         â€” Swift / Kotlin ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”Ÿæˆ
```

å®Ÿè£…äºˆå®šï¼š
- `nurunuru-ffi/src/lib.rs` â€” uniffi::export ãƒ©ãƒƒãƒ‘ãƒ¼
- `nurunuru-ffi/nurunuru.udl` â€” å‹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©
- iOS: Swift Package ã¨ã—ã¦é…å¸ƒ
- Android: AAR / Kotlin bindings ã¨ã—ã¦é…å¸ƒ
- å‰æ: `nurunuru-core` ã® API ã¯å¤‰æ›´ä¸è¦

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç›®æ¨™å›³ï¼ˆWeb ç‰ˆã®å®Œæˆå½¢ï¼‰

```
ãƒ–ãƒ©ã‚¦ã‚¶
  â”œâ”€ ç½²å: nostr.js (NIP-07 / Amber / NIP-46)
  â”œâ”€ WebSocket â†’ ãƒªãƒ¬ãƒ¼ç¾¤ (nostr-tools SimplePool)
  â”‚     â”œâ”€ wss://yabu.me
  â”‚     â”œâ”€ wss://relay-jp.nostr.wirednet.jp
  â”‚     â”œâ”€ wss://r.kojira.io
  â”‚     â””â”€ wss://search.nos.today (NIP-50)
  â””â”€ localStorage / LRU ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (lib/cache.js)

ã‚µãƒ¼ãƒãƒ¼ (Next.js / Vercel)
  â””â”€ é™çš„ãƒšãƒ¼ã‚¸é…ä¿¡ã®ã¿ï¼ˆRust ã‚¨ãƒ³ã‚¸ãƒ³ä¸ä½¿ç”¨ï¼‰

ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒª (å°†æ¥ Step 10)
  â”œâ”€ iOS: Swift â†’ nurunuru-ffi (UniFFI) â†’ nurunuru-core
  â””â”€ Android: Kotlin â†’ nurunuru-ffi (UniFFI) â†’ nurunuru-core
                                                    â†“
                                              ãƒ‡ãƒã‚¤ã‚¹å†… nostrdbï¼ˆå€‹äººç”¨ï¼‰
```
